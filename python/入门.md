---
title: "python入门"
date: 2025-08-04
categories:
  - python
---

# Poetry

## 下载

### windows

~~~shell
# 设置临时pip镜像
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple

(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python -

# 设置环境变量
win+R sysdm.cpl
# 用户 path
C:\Users\tutu\AppData\Roaming\Python\Scripts
~~~



```powershell
poetry --version
poetry new ai_novel
# 添加依赖
poetry add <>
# 删除依赖
poetry remove  <>
# 安装所有依赖
poetry install
# 运行
poetry run python src/<>/main.py
# 进入虚拟环境之后运行
poetry shell  # 激活虚拟环境
python src/<>/main.py
exit
```

## 镜像

```
poetry source show

poetry source add tsinghua https://pypi.tuna.tsinghua.edu.cn/simple
```

## 使用

* 初始化项目

poetry new <project_name>

* 项目结构

```
├── pyproject.toml
├── README.md
├── src
│   └── <project_name>
│       └── __init__.py
└── tests
    └── __init__.py
```

* 后续结构

```
├── pyproject.toml
├── README.md
├── src/
│   └── <project_name>/
│       ├── __init__.py
│       ├── main.py
│       └── <>/
|						├── __init__.py
│           ├── <>.py
└── tests
    └── __init__.py
```

### 运行

main.py格式规范

```python
def main():
    ......

if __name__ == "__main__":
    main()
```

```shell
# 普通运行
poetry run python src/<project_name>/main.py
# 或者
poetry run python -m <project_name>.main

# 最简
poetry run <project_name>
# 在 toml 文件中添加以下信息
[tool.poetry.scripts]
langgraph_service = "<project_name>.main:main"
```

# 包引入

```
├── src/
│   └── <project_name>/
│       ├── __init__.py
│       ├── main.py
│       └── test/
|						├── __init__.py
│           ├── utils.py
```

1. 包文件夹需要有`__init__.py`
2. 引入路径方式：`from <project_name>.test.utils import <>`

# 虚拟环境

```shell
# 创建虚拟环境
python3 -m venv .venv

# 激活虚拟环境
source .venv/bin/activate # mac/linux
.venv\Scripts\activate # windows cmd
.venv\Scripts\Activate.ps1 # windows powershell

# 镜像安装依赖
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 退出虚拟环境
deactivate
```

